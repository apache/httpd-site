<html>
<head>
  <link rel="stylesheet" type="text/css" href="dox.css" />
  <title>libapreq2-2.13: libapreq2: include/apreq_parser.h File Reference</title> 
</head>
<body>
<div id="page-header">
<p class="menu">
   <a href="http://www.apache.org/">Apache Software Foundation</a> &gt; <a href="http://httpd.apache.org">HTTP Server Project</a> &gt;
<a href="http://httpd.apache.org/apreq/">Request Library Subproject</a></p>
<p class="apache">Apache HTTP Server Request Library</p>
<img alt="" src="feather.gif" /></div>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>include/apreq_parser.h File Reference</h1>Request body parser API. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="apreq__param_8h-source.html">apreq_param.h</a>&quot;</code><br>

<p>
<a href="apreq__parser_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structapreq__hook__t.html">apreq_hook_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structapreq__parser__t.html">apreq_parser_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structapreq__hook__find__param__ctx__t.html">apreq_hook_find_param_ctx_t</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#f39d2adfdd09c2fe0c8c6a3c1ea1437e">APREQ_PARSER_ARGS</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#61c8b1c319752bde3cc35e98247707bf">APREQ_HOOK_ARGS</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#855c07ea7fc9e240c8620d29eea4a019">APREQ_DECLARE_PARSER</a>(f)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#baa196498d8cf959e07b4c84d5264f7f">APREQ_DECLARE_HOOK</a>(f)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef struct <a class="el" href="structapreq__hook__t.html">apreq_hook_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#2c35885676cec315fc7dea19a6d1d870">apreq_hook_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef struct <a class="el" href="structapreq__parser__t.html">apreq_parser_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#de5e15a40b9e1ec626ee56c494c7cdbb">apreq_parser_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#98c4415da3f11cf5ced76bd3c6540e65">apreq_parser_function_t</a> )(APREQ_PARSER_ARGS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#6841a882a8a33203233506bd6754585a">apreq_hook_function_t</a> )(APREQ_HOOK_ARGS)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static APR_INLINE <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#3c00aa3a31daba2c06110d5fc8edf1fe">apreq_parser_run</a> (struct <a class="el" href="structapreq__parser__t.html">apreq_parser_t</a> *psr, <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__tables.html#gd7ea82d6608a4a633fc3775694ab71e4">apr_table_t</a> *t, <a class="elRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/1.3/" href="http://apr.apache.org/docs/apr-util/1.3/structapr__bucket__brigade.html">apr_bucket_brigade</a> *bb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static APR_INLINE <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#14d03a414fc4a0663af55fbb1f532bab">apreq_hook_run</a> (struct <a class="el" href="structapreq__hook__t.html">apreq_hook_t</a> *h, <a class="el" href="structapreq__param__t.html">apreq_param_t</a> *param, <a class="elRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/1.3/" href="http://apr.apache.org/docs/apr-util/1.3/structapr__bucket__brigade.html">apr_bucket_brigade</a> *bb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#6fd1ffe554941172fce54217c35f9db3">APREQ_DECLARE_PARSER</a> (apreq_parse_headers)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#ec4b20f646ea57ad84d6a3391c548838">APREQ_DECLARE_PARSER</a> (apreq_parse_urlencoded)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#3bb6d9580fcbaf11cef33072ed3b14cb">APREQ_DECLARE_PARSER</a> (apreq_parse_multipart)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#2833122bb6995f056a96df80a9f5a45f">APREQ_DECLARE_PARSER</a> (apreq_parse_generic)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#dda61d873abf1c0ed1857bda405baa49">APREQ_DECLARE_HOOK</a> (apreq_hook_apr_xml_parser)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structapreq__parser__t.html">apreq_parser_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#562191171c5df0a83360435d0fe1a667">apreq_parser_make</a> (<a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__pools.html#gf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *pool, <a class="elRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/1.3/" href="http://apr.apache.org/docs/apr-util/1.3/group___a_p_r___util___bucket___brigades.html#g9a30babfeb6e290db124d8f9b69e49e4">apr_bucket_alloc_t</a> *ba, const char *content_type, <a class="el" href="apreq__parser_8h.html#98c4415da3f11cf5ced76bd3c6540e65">apreq_parser_function_t</a> pfn, <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__platform.html#gaa72b2253f6f3032cefea5712a27540e">apr_size_t</a> brigade_limit, const char *temp_dir, <a class="el" href="structapreq__hook__t.html">apreq_hook_t</a> *hook, void *ctx)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structapreq__hook__t.html">apreq_hook_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#3cf15457eea6991b36f47f6139ab163c">apreq_hook_make</a> (<a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__pools.html#gf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *pool, <a class="el" href="apreq__parser_8h.html#6841a882a8a33203233506bd6754585a">apreq_hook_function_t</a> hook, <a class="el" href="structapreq__hook__t.html">apreq_hook_t</a> *next, void *ctx)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#97972c08b20917465b745c8b8eec95ed">apreq_parser_add_hook</a> (<a class="el" href="structapreq__parser__t.html">apreq_parser_t</a> *p, <a class="el" href="structapreq__hook__t.html">apreq_hook_t</a> *h)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="apreq__parser_8h.html#98c4415da3f11cf5ced76bd3c6540e65">apreq_parser_function_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#73013ecad087f14075d319a4a983dd82">apreq_parser</a> (const char *enctype)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#595f05be3d241a5b339fd6ef948bfbc8">apreq_register_parser</a> (const char *enctype, <a class="el" href="apreq__parser_8h.html#98c4415da3f11cf5ced76bd3c6540e65">apreq_parser_function_t</a> pfn)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#162c74d59738663d7cb2109ee0b87c0a">APREQ_DECLARE_HOOK</a> (apreq_hook_disable_uploads)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#d169b0ac7b7b1a66d3df3ae66c96a16c">APREQ_DECLARE_HOOK</a> (apreq_hook_discard_brigade)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="apreq__parser_8h.html#5deeed0646b3d61cafe4eb5b6e40b16c">APREQ_DECLARE_HOOK</a> (apreq_hook_find_param)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Request body parser API. 
<p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="baa196498d8cf959e07b4c84d5264f7f"></a><!-- doxytag: member="apreq_parser.h::APREQ_DECLARE_HOOK" ref="baa196498d8cf959e07b4c84d5264f7f" args="(f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APREQ_DECLARE_HOOK          </td>
          <td>(</td>
          <td class="paramtype">f&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="apreq_8h.html#8a1e7333187fdbc476473ac72d2ff38b">APREQ_DECLARE_NONSTD</a>(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>) \
                                (f) (<a class="code" href="apreq__parser_8h.html#61c8b1c319752bde3cc35e98247707bf">APREQ_HOOK_ARGS</a>)
</pre></div>Declares an API hook. 
</div>
</div><p>
<a class="anchor" name="855c07ea7fc9e240c8620d29eea4a019"></a><!-- doxytag: member="apreq_parser.h::APREQ_DECLARE_PARSER" ref="855c07ea7fc9e240c8620d29eea4a019" args="(f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APREQ_DECLARE_PARSER          </td>
          <td>(</td>
          <td class="paramtype">f&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="apreq_8h.html#8a1e7333187fdbc476473ac72d2ff38b">APREQ_DECLARE_NONSTD</a>(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>) \
                                (f) (<a class="code" href="apreq__parser_8h.html#f39d2adfdd09c2fe0c8c6a3c1ea1437e">APREQ_PARSER_ARGS</a>)
</pre></div>Declares a API parser. 
</div>
</div><p>
<a class="anchor" name="61c8b1c319752bde3cc35e98247707bf"></a><!-- doxytag: member="apreq_parser.h::APREQ_HOOK_ARGS" ref="61c8b1c319752bde3cc35e98247707bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APREQ_HOOK_ARGS          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="structapreq__hook__t.html">apreq_hook_t</a> *hook,         \
                           <a class="code" href="structapreq__param__t.html">apreq_param_t</a> *param,       \
                           <a class="codeRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/1.3/" href="http://apr.apache.org/docs/apr-util/1.3/structapr__bucket__brigade.html">apr_bucket_brigade</a> *bb
</pre></div>Hook arguments 
</div>
</div><p>
<a class="anchor" name="f39d2adfdd09c2fe0c8c6a3c1ea1437e"></a><!-- doxytag: member="apreq_parser.h::APREQ_PARSER_ARGS" ref="f39d2adfdd09c2fe0c8c6a3c1ea1437e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APREQ_PARSER_ARGS          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="structapreq__parser__t.html">apreq_parser_t</a> *parser,     \
                           <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__tables.html#gd7ea82d6608a4a633fc3775694ab71e4">apr_table_t</a> *t,             \
                           <a class="codeRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/1.3/" href="http://apr.apache.org/docs/apr-util/1.3/structapr__bucket__brigade.html">apr_bucket_brigade</a> *bb
</pre></div>Parser arguments. 
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="6841a882a8a33203233506bd6754585a"></a><!-- doxytag: member="apreq_parser.h::apreq_hook_function_t" ref="6841a882a8a33203233506bd6754585a" args=")(APREQ_HOOK_ARGS)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>(* <a class="el" href="apreq__parser_8h.html#6841a882a8a33203233506bd6754585a">apreq_hook_function_t</a>)(APREQ_HOOK_ARGS)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The callback function of a hook. See <a class="el" href="structapreq__hook__t.html">apreq_hook_t</a>. 
</div>
</div><p>
<a class="anchor" name="2c35885676cec315fc7dea19a6d1d870"></a><!-- doxytag: member="apreq_parser.h::apreq_hook_t" ref="2c35885676cec315fc7dea19a6d1d870" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structapreq__hook__t.html">apreq_hook_t</a> <a class="el" href="structapreq__hook__t.html">apreq_hook_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A hook is called by the parser whenever data arrives in a file upload parameter of the request body. You may associate any number of hooks with a parser instance with <a class="el" href="apreq__parser_8h.html#97972c08b20917465b745c8b8eec95ed">apreq_parser_add_hook()</a>. 
</div>
</div><p>
<a class="anchor" name="98c4415da3f11cf5ced76bd3c6540e65"></a><!-- doxytag: member="apreq_parser.h::apreq_parser_function_t" ref="98c4415da3f11cf5ced76bd3c6540e65" args=")(APREQ_PARSER_ARGS)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>(* <a class="el" href="apreq__parser_8h.html#98c4415da3f11cf5ced76bd3c6540e65">apreq_parser_function_t</a>)(APREQ_PARSER_ARGS)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The callback function implementing a request body parser. 
</div>
</div><p>
<a class="anchor" name="de5e15a40b9e1ec626ee56c494c7cdbb"></a><!-- doxytag: member="apreq_parser.h::apreq_parser_t" ref="de5e15a40b9e1ec626ee56c494c7cdbb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structapreq__parser__t.html">apreq_parser_t</a> <a class="el" href="structapreq__parser__t.html">apreq_parser_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A request body parser instance. 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="5deeed0646b3d61cafe4eb5b6e40b16c"></a><!-- doxytag: member="apreq_parser.h::APREQ_DECLARE_HOOK" ref="5deeed0646b3d61cafe4eb5b6e40b16c" args="(apreq_hook_find_param)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APREQ_DECLARE_HOOK           </td>
          <td>(</td>
          <td class="paramtype">apreq_hook_find_param&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Special purpose utility for locating a parameter during parsing. The hook's ctx shoud be initialized to an <a class="el" href="structapreq__hook__find__param__ctx__t.html">apreq_hook_find_param_ctx_t</a> *, with the name attribute set to the sought parameter name, the param attribute set to NULL, and the prev attribute set to the address of the previous hook. The param attribute will be reassigned to the first param found, and once that happens this hook is immediately removed from the chain.<p>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>When used, this should always be the first hook invoked, so add it manually with ctx-&gt;prev = &amp;parser-&gt;hook instead of using apreq_parser_add_hook. </dd></dl>

</div>
</div><p>
<a class="anchor" name="d169b0ac7b7b1a66d3df3ae66c96a16c"></a><!-- doxytag: member="apreq_parser.h::APREQ_DECLARE_HOOK" ref="d169b0ac7b7b1a66d3df3ae66c96a16c" args="(apreq_hook_discard_brigade)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APREQ_DECLARE_HOOK           </td>
          <td>(</td>
          <td class="paramtype">apreq_hook_discard_brigade&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calls apr_brigade_cleanup on the incoming brigade after passing the brigade to any subsequent hooks. 
</div>
</div><p>
<a class="anchor" name="162c74d59738663d7cb2109ee0b87c0a"></a><!-- doxytag: member="apreq_parser.h::APREQ_DECLARE_HOOK" ref="162c74d59738663d7cb2109ee0b87c0a" args="(apreq_hook_disable_uploads)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APREQ_DECLARE_HOOK           </td>
          <td>(</td>
          <td class="paramtype">apreq_hook_disable_uploads&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns APREQ_ERROR_GENERAL. Effectively disables mfd parser if a file-upload field is present. 
</div>
</div><p>
<a class="anchor" name="dda61d873abf1c0ed1857bda405baa49"></a><!-- doxytag: member="apreq_parser.h::APREQ_DECLARE_HOOK" ref="dda61d873abf1c0ed1857bda405baa49" args="(apreq_hook_apr_xml_parser)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APREQ_DECLARE_HOOK           </td>
          <td>(</td>
          <td class="paramtype">apreq_hook_apr_xml_parser&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
apr_xml_parser hook. It will parse until EOS appears. The parsed document isn't available until parsing has completed successfully. The hook's ctx pointer may be cast as (<a class="elRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/1.3/" href="http://apr.apache.org/docs/apr-util/1.3/structapr__xml__doc.html">apr_xml_doc</a> **) to retrieve the parsed document. 
</div>
</div><p>
<a class="anchor" name="2833122bb6995f056a96df80a9f5a45f"></a><!-- doxytag: member="apreq_parser.h::APREQ_DECLARE_PARSER" ref="2833122bb6995f056a96df80a9f5a45f" args="(apreq_parse_generic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APREQ_DECLARE_PARSER           </td>
          <td>(</td>
          <td class="paramtype">apreq_parse_generic&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generic parser. No table entries will be added to the req-&gt;body table by this parser. The parser creates a dummy <a class="el" href="structapreq__param__t.html">apreq_param_t</a> to pass to any configured hooks. If no hooks are configured, the dummy param's bb slot will contain a copy of the request body. It can be retrieved by casting the parser's ctx pointer to (<a class="el" href="structapreq__param__t.html">apreq_param_t</a> **). 
</div>
</div><p>
<a class="anchor" name="3bb6d9580fcbaf11cef33072ed3b14cb"></a><!-- doxytag: member="apreq_parser.h::APREQ_DECLARE_PARSER" ref="3bb6d9580fcbaf11cef33072ed3b14cb" args="(apreq_parse_multipart)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APREQ_DECLARE_PARSER           </td>
          <td>(</td>
          <td class="paramtype">apreq_parse_multipart&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
RFC 2388 multipart/form-data (and XForms 1.0 multipart/related) parser. It will reject any buckets representing preamble and postamble text (this is normal behavior, not an error condition). See <a class="el" href="apreq__parser_8h.html#3c00aa3a31daba2c06110d5fc8edf1fe">apreq_parser_run()</a> for more info on rejected data. 
</div>
</div><p>
<a class="anchor" name="ec4b20f646ea57ad84d6a3391c548838"></a><!-- doxytag: member="apreq_parser.h::APREQ_DECLARE_PARSER" ref="ec4b20f646ea57ad84d6a3391c548838" args="(apreq_parse_urlencoded)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APREQ_DECLARE_PARSER           </td>
          <td>(</td>
          <td class="paramtype">apreq_parse_urlencoded&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
RFC 2396 application/x-www-form-urlencoded parser. 
</div>
</div><p>
<a class="anchor" name="6fd1ffe554941172fce54217c35f9db3"></a><!-- doxytag: member="apreq_parser.h::APREQ_DECLARE_PARSER" ref="6fd1ffe554941172fce54217c35f9db3" args="(apreq_parse_headers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">APREQ_DECLARE_PARSER           </td>
          <td>(</td>
          <td class="paramtype">apreq_parse_headers&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
RFC 822 Header parser. It will reject all data after the first CRLF CRLF sequence (an empty line). See <a class="el" href="apreq__parser_8h.html#3c00aa3a31daba2c06110d5fc8edf1fe">apreq_parser_run()</a> for more info on rejected data. 
</div>
</div><p>
<a class="anchor" name="3cf15457eea6991b36f47f6139ab163c"></a><!-- doxytag: member="apreq_parser.h::apreq_hook_make" ref="3cf15457eea6991b36f47f6139ab163c" args="(apr_pool_t *pool, apreq_hook_function_t hook, apreq_hook_t *next, void *ctx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structapreq__hook__t.html">apreq_hook_t</a>* apreq_hook_make           </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__pools.html#gf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="apreq__parser_8h.html#6841a882a8a33203233506bd6754585a">apreq_hook_function_t</a>&nbsp;</td>
          <td class="paramname"> <em>hook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapreq__hook__t.html">apreq_hook_t</a> *&nbsp;</td>
          <td class="paramname"> <em>next</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>ctx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct a hook.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>used to allocate the hook. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hook</em>&nbsp;</td><td>The hook function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>next</em>&nbsp;</td><td>List of other hooks for this hook to call on. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ctx</em>&nbsp;</td><td>Hook's internal scratch pad. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>New hook. </dd></dl>

</div>
</div><p>
<a class="anchor" name="14d03a414fc4a0663af55fbb1f532bab"></a><!-- doxytag: member="apreq_parser.h::apreq_hook_run" ref="14d03a414fc4a0663af55fbb1f532bab" args="(struct apreq_hook_t *h, apreq_param_t *param, apr_bucket_brigade *bb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static APR_INLINE <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apreq_hook_run           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structapreq__hook__t.html">apreq_hook_t</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapreq__param__t.html">apreq_param_t</a> *&nbsp;</td>
          <td class="paramname"> <em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/1.3/" href="http://apr.apache.org/docs/apr-util/1.3/structapr__bucket__brigade.html">apr_bucket_brigade</a> *&nbsp;</td>
          <td class="paramname"> <em>bb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Run the hook with the current parameter and the incoming bucket brigade. The hook may modify the brigade if necessary. Once all hooks have completed, the contents of the brigade will be added to the parameter's bb attribute. <dl class="return" compact><dt><b>Returns:</b></dt><dd>APR_SUCCESS on success. All other values represent errors. </dd></dl>

</div>
</div><p>
<a class="anchor" name="73013ecad087f14075d319a4a983dd82"></a><!-- doxytag: member="apreq_parser.h::apreq_parser" ref="73013ecad087f14075d319a4a983dd82" args="(const char *enctype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="apreq__parser_8h.html#98c4415da3f11cf5ced76bd3c6540e65">apreq_parser_function_t</a> apreq_parser           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>enctype</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Fetch the default parser function associated with the given MIME type. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>enctype</em>&nbsp;</td><td>The desired enctype (can also be a full "Content-Type" header). </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The parser function, or NULL if the enctype is unrecognized. </dd></dl>

</div>
</div><p>
<a class="anchor" name="97972c08b20917465b745c8b8eec95ed"></a><!-- doxytag: member="apreq_parser.h::apreq_parser_add_hook" ref="97972c08b20917465b745c8b8eec95ed" args="(apreq_parser_t *p, apreq_hook_t *h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apreq_parser_add_hook           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structapreq__parser__t.html">apreq_parser_t</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapreq__hook__t.html">apreq_hook_t</a> *&nbsp;</td>
          <td class="paramname"> <em>h</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a new hook to the end of the parser's hook list.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>Parser. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>Hook to append. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="562191171c5df0a83360435d0fe1a667"></a><!-- doxytag: member="apreq_parser.h::apreq_parser_make" ref="562191171c5df0a83360435d0fe1a667" args="(apr_pool_t *pool, apr_bucket_alloc_t *ba, const char *content_type, apreq_parser_function_t pfn, apr_size_t brigade_limit, const char *temp_dir, apreq_hook_t *hook, void *ctx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structapreq__parser__t.html">apreq_parser_t</a>* apreq_parser_make           </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__pools.html#gf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/1.3/" href="http://apr.apache.org/docs/apr-util/1.3/group___a_p_r___util___bucket___brigades.html#g9a30babfeb6e290db124d8f9b69e49e4">apr_bucket_alloc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ba</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>content_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="apreq__parser_8h.html#98c4415da3f11cf5ced76bd3c6540e65">apreq_parser_function_t</a>&nbsp;</td>
          <td class="paramname"> <em>pfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__platform.html#gaa72b2253f6f3032cefea5712a27540e">apr_size_t</a>&nbsp;</td>
          <td class="paramname"> <em>brigade_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>temp_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapreq__hook__t.html">apreq_hook_t</a> *&nbsp;</td>
          <td class="paramname"> <em>hook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>ctx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct a parser.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool used to allocate the parser. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ba</em>&nbsp;</td><td>bucket allocator used to create bucket brigades </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>content_type</em>&nbsp;</td><td>Content-type that this parser can deal with. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pfn</em>&nbsp;</td><td>The parser function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>brigade_limit</em>&nbsp;</td><td>the maximum in-memory bytes a brigade may use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>temp_dir</em>&nbsp;</td><td>the directory used by the parser for temporary files </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hook</em>&nbsp;</td><td>Hooks to associate this parser with. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ctx</em>&nbsp;</td><td>Parser's internal scratch pad. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>New parser. </dd></dl>

</div>
</div><p>
<a class="anchor" name="3c00aa3a31daba2c06110d5fc8edf1fe"></a><!-- doxytag: member="apreq_parser.h::apreq_parser_run" ref="3c00aa3a31daba2c06110d5fc8edf1fe" args="(struct apreq_parser_t *psr, apr_table_t *t, apr_bucket_brigade *bb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static APR_INLINE <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apreq_parser_run           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structapreq__parser__t.html">apreq_parser_t</a> *&nbsp;</td>
          <td class="paramname"> <em>psr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__tables.html#gd7ea82d6608a4a633fc3775694ab71e4">apr_table_t</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/1.3/" href="http://apr.apache.org/docs/apr-util/1.3/structapr__bucket__brigade.html">apr_bucket_brigade</a> *&nbsp;</td>
          <td class="paramname"> <em>bb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parse the incoming brigade into a table. Parsers normally consume all the buckets of the brigade during parsing. However parsers may leave "rejected" data in the brigade, even during a successful parse, so callers may need to clean up the brigade themselves (in particular, rejected buckets should not be passed back to the parser again). <dl class="remark" compact><dt><b>Remarks:</b></dt><dd>bb == NULL is valid: the parser should return its public status: APR_INCOMPLETE, APR_SUCCESS, or an error code. </dd></dl>

</div>
</div><p>
<a class="anchor" name="595f05be3d241a5b339fd6ef948bfbc8"></a><!-- doxytag: member="apreq_parser.h::apreq_register_parser" ref="595f05be3d241a5b339fd6ef948bfbc8" args="(const char *enctype, apreq_parser_function_t pfn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/1.3/" href="http://apr.apache.org/docs/apr/1.3/group__apr__errno.html#gf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apreq_register_parser           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>enctype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="apreq__parser_8h.html#98c4415da3f11cf5ced76bd3c6540e65">apreq_parser_function_t</a>&nbsp;</td>
          <td class="paramname"> <em>pfn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Register a new parsing function with a MIME enctype. Registered parsers are added to <a class="el" href="apreq__parser_8h.html#73013ecad087f14075d319a4a983dd82">apreq_parser()</a>'s internal lookup table.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>enctype</em>&nbsp;</td><td>The MIME type. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pfn</em>&nbsp;</td><td>The function to use during parsing. Setting parser == NULL will remove an existing parser.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>APR_SUCCESS or error. </dd></dl>

</div>
</div><p>
</div>
<div id="footer">
<p class="apache">
Copyright &copy; 2003-2006 <a href="http://www.apache.org">The Apache Software Foundation</a>.<br/>
See <a href="apreq_license.html">LICENSE</a>.</p>
<p class="menu">
<span style="color:#aaa">page generated by <a href="http://www.doxygen.org/"><code>doxygen</code></a>
version 1.5.6 on 3 Dec 2010</span>
</p>
</div>
</body>
</html>
